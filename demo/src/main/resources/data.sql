-- ========================================

-- 스마트 팩토리 샘플 데이터 삽입 (중복 방지)

-- Database: smart_factory

-- ========================================



-- ========================================

-- 1. 마스터 데이터 삽입 (중복 방지)

-- ========================================



-- 공정별 머신 정보 초기 데이터 (INSERT IGNORE 사용)

INSERT IGNORE INTO process_machine_info (pm_id, process_name, machine_name, standard_cycle_time, description) VALUES

('PM001', '주조', '주조기1', 3600, '금속 용해 및 주조 장비 1호기'),

('PM002', '주조', '주조기2', 3600, '금속 용해 및 주조 장비 2호기'),

('PM003', '주조', '주조기3', 3600, '금속 용해 및 주조 장비 3호기'),

('PM004', '가공', '가공기1', 1800, '정밀 가공 및 성형 장비 1호기'),

('PM005', '가공', '가공기2', 1800, '정밀 가공 및 성형 장비 2호기'),

('PM006', '검사', '검사장비', 900, '품질 검사 및 측정 장비'),

('PM007', '조립', '조립기', 1200, '부품 조립 및 결합 장비'),

('PM008', '포장', '포장기', 600, '자동 포장 및 밀봉 장비');



-- 공장 운영시간 초기 데이터 (ON DUPLICATE KEY UPDATE 사용)

INSERT INTO operation_schedule (schedule_type, start_time, end_time, description) VALUES

('운영시간', '06:00:00', '23:00:00', '일일 총 운영시간 17시간'),

('점심시간', '12:00:00', '13:00:00', '휴게시간 (비가동)'),

('저녁시간', '19:00:00', '20:00:00', '휴게시간 (비가동)')

ON DUPLICATE KEY UPDATE

start_time = VALUES(start_time),

end_time = VALUES(end_time),

description = VALUES(description);



-- ========================================

-- 2. 환경 데이터 샘플 (중복 방지)

-- ========================================

INSERT IGNORE INTO environment_data (timestamp, temperature, humidity) VALUES

('2025-08-25 06:00:00', 22.5, 45.2),

('2025-08-25 07:00:00', 24.6, 48.3),

('2025-08-25 08:00:00', 26.2, 51.2),

('2025-08-25 09:00:00', 27.1, 52.8),

('2025-08-25 10:00:00', 28.3, 54.5),

('2025-08-25 11:00:00', 29.2, 56.1),

('2025-08-25 12:00:00', 30.1, 58.3),

('2025-08-25 13:00:00', 29.8, 57.9),

('2025-08-25 14:00:00', 29.5, 57.2),

('2025-08-25 15:00:00', 29.1, 56.8),

('2025-08-25 16:00:00', 28.7, 55.9),

('2025-08-25 17:00:00', 28.2, 55.1),

('2025-08-25 18:00:00', 27.8, 54.3),

('2025-08-25 19:00:00', 27.3, 53.7),

('2025-08-25 20:00:00', 26.9, 52.9),

('2025-08-25 21:00:00', 26.4, 52.1),

('2025-08-25 22:00:00', 25.8, 51.3),

('2025-08-25 23:00:00', 25.2, 50.5),

('2025-08-24 12:00:00', 29.7, 57.8),

('2025-08-24 18:00:00', 27.5, 53.9);



-- ========================================

-- 3. 생산 실적 샘플 데이터

-- ========================================

INSERT IGNORE INTO production_data (timestamp, pm_id, completed_quantity, cycle_time, quality_grade) VALUES

-- PM001 주조기1

('2025-08-25 07:15:00', 'PM001', 1, 3720, 'A'),

('2025-08-25 08:22:00', 'PM001', 1, 3650, 'A'),

('2025-08-25 09:35:00', 'PM001', 1, 3580, 'B'),

('2025-08-25 10:48:00', 'PM001', 1, 3690, 'A'),

('2025-08-25 12:05:00', 'PM001', 1, 3750, 'A'),

('2025-08-25 14:12:00', 'PM001', 1, 3620, 'A'),



-- PM002 주조기2

('2025-08-25 07:20:00', 'PM002', 1, 3680, 'A'),

('2025-08-25 08:25:00', 'PM002', 1, 3590, 'A'),

('2025-08-25 09:42:00', 'PM002', 1, 3720, 'A'),

('2025-08-25 10:55:00', 'PM002', 1, 3640, 'B'),



-- PM004 가공기1

('2025-08-25 06:35:00', 'PM004', 2, 1750, 'A'),

('2025-08-25 07:05:00', 'PM004', 2, 1820, 'A'),

('2025-08-25 07:35:00', 'PM004', 2, 1780, 'B'),

('2025-08-25 08:10:00', 'PM004', 2, 1850, 'A'),



-- PM006 검사장비

('2025-08-25 06:20:00', 'PM006', 5, 880, 'A'),

('2025-08-25 06:35:00', 'PM006', 5, 920, 'A'),

('2025-08-25 06:50:00', 'PM006', 5, 890, 'A'),

('2025-08-25 07:08:00', 'PM006', 4, 950, 'B'),



-- PM008 포장기

('2025-08-25 06:15:00', 'PM008', 10, 580, 'A'),

('2025-08-25 06:25:00', 'PM008', 10, 620, 'A'),

('2025-08-25 06:35:00', 'PM008', 10, 590, 'A'),

('2025-08-25 06:48:00', 'PM008', 8, 650, 'B');



-- ========================================

-- 4. 전력 데이터 샘플

-- ========================================

INSERT IGNORE INTO power_data (timestamp, pm_id, power_consumption, voltage, current_value) VALUES

-- 주조기 (고전력)

('2025-08-25 06:00:00', 'PM001', 45.2, 380.5, 68.9),

('2025-08-25 06:01:00', 'PM001', 47.8, 381.2, 71.2),

('2025-08-25 06:02:00', 'PM001', 46.5, 380.8, 69.8),

('2025-08-25 06:00:00', 'PM002', 44.8, 379.8, 68.2),

('2025-08-25 06:01:00', 'PM002', 46.2, 380.4, 69.9),



-- 가공기 (중간 전력)

('2025-08-25 06:00:00', 'PM004', 28.5, 220.3, 39.2),

('2025-08-25 06:01:00', 'PM004', 29.1, 220.8, 39.8),

('2025-08-25 06:00:00', 'PM005', 27.8, 219.8, 38.9),

('2025-08-25 06:01:00', 'PM005', 29.5, 220.9, 40.1),



-- 검사장비 (저전력)

('2025-08-25 06:00:00', 'PM006', 12.3, 220.1, 16.8),

('2025-08-25 06:01:00', 'PM006', 11.9, 219.8, 16.4),



-- 조립기

('2025-08-25 06:00:00', 'PM007', 18.5, 220.2, 25.3),

('2025-08-25 06:01:00', 'PM007', 19.1, 220.6, 25.9),



-- 포장기 (최저 전력)

('2025-08-25 06:00:00', 'PM008', 8.2, 220.0, 11.3),

('2025-08-25 06:01:00', 'PM008', 8.6, 220.2, 11.7);



-- ========================================

-- 5. 진동 데이터 샘플

-- ========================================

INSERT IGNORE INTO vibration_data (timestamp, pm_id, vibration_x, vibration_y, vibration_z, rms_value, peak_value) VALUES

-- 정상 운전 상태

('2025-08-25 16:00:00', 'PM001', 2.15, 1.98, 2.32, 2.18, 4.85),

('2025-08-25 16:00:10', 'PM001', 2.08, 2.12, 2.18, 2.13, 4.72),

('2025-08-25 16:00:20', 'PM001', 2.22, 1.89, 2.41, 2.21, 5.01),



-- 약간 높은 진동

('2025-08-25 16:00:00', 'PM002', 3.22, 2.98, 3.45, 3.25, 7.12),

('2025-08-25 16:00:10', 'PM002', 3.18, 3.05, 3.38, 3.22, 6.98),



-- 가공기 정상 진동

('2025-08-25 16:00:00', 'PM004', 1.85, 1.72, 1.98, 1.87, 3.95),

('2025-08-25 16:00:10', 'PM004', 1.78, 1.89, 1.82, 1.83, 3.78),



-- 검사장비 낮은 진동

('2025-08-25 16:00:00', 'PM006', 0.45, 0.52, 0.38, 0.46, 0.89),

('2025-08-25 16:00:10', 'PM006', 0.41, 0.48, 0.43, 0.44, 0.85),



-- 조립기 중간 진동

('2025-08-25 16:00:00', 'PM007', 1.25, 1.38, 1.12, 1.26, 2.58),

('2025-08-25 16:00:10', 'PM007', 1.32, 1.29, 1.41, 1.34, 2.78),



-- 포장기 낮은 진동

('2025-08-25 16:00:00', 'PM008', 0.78, 0.85, 0.71, 0.78, 1.52),

('2025-08-25 16:00:10', 'PM008', 0.82, 0.79, 0.88, 0.83, 1.65);



-- ========================================

-- 6. 머신 가동상태 데이터 샘플

-- ========================================

INSERT IGNORE INTO machine_status_data (timestamp, pm_id, status, status_duration, error_code) VALUES

-- 정상 운전 상태

('2025-08-25 16:00:00', 'PM001', 1, 3600, NULL),

('2025-08-25 16:00:10', 'PM001', 1, 3610, NULL),

('2025-08-25 16:00:00', 'PM002', 1, 2890, NULL),

('2025-08-25 16:00:10', 'PM002', 1, 2900, NULL),

('2025-08-25 16:00:00', 'PM004', 1, 1780, NULL),

('2025-08-25 16:00:10', 'PM004', 1, 1790, NULL),

('2025-08-25 16:00:00', 'PM005', 1, 2150, NULL),

('2025-08-25 16:00:00', 'PM006', 1, 890, NULL),

('2025-08-25 16:00:00', 'PM007', 1, 1200, NULL),

('2025-08-25 16:00:00', 'PM008', 1, 580, NULL),



-- 점심시간 정지 상태

('2025-08-25 12:00:00', 'PM001', 0, 0, NULL),

('2025-08-25 12:30:00', 'PM001', 0, 1800, NULL),

('2025-08-25 13:00:00', 'PM001', 1, 0, NULL),

('2025-08-25 12:00:00', 'PM002', 0, 0, NULL),

('2025-08-25 13:00:00', 'PM002', 1, 0, NULL),



-- 점검 상태

('2025-08-25 14:30:00', 'PM003', 2, 0, 'MAINT001'),

('2025-08-25 14:45:00', 'PM003', 2, 900, 'MAINT001'),

('2025-08-25 15:00:00', 'PM003', 1, 0, NULL),



-- 야간 종료

('2025-08-25 23:00:00', 'PM001', 0, 0, NULL),

('2025-08-25 23:00:00', 'PM002', 0, 0, NULL),

('2025-08-25 23:00:00', 'PM004', 0, 0, NULL),

('2025-08-25 23:00:00', 'PM005', 0, 0, NULL),

('2025-08-25 23:00:00', 'PM006', 0, 0, NULL),

('2025-08-25 23:00:00', 'PM007', 0, 0, NULL),

('2025-08-25 23:00:00', 'PM008', 0, 0, NULL),



-- 다음날 아침 가동 시작

('2025-08-26 06:00:00', 'PM001', 1, 0, NULL),

('2025-08-26 06:00:00', 'PM002', 1, 0, NULL),

('2025-08-26 06:00:00', 'PM004', 1, 0, NULL),

('2025-08-26 06:00:00', 'PM005', 1, 0, NULL),

('2025-08-26 06:00:00', 'PM006', 1, 0, NULL),

('2025-08-26 06:00:00', 'PM007', 0, 0, NULL),

('2025-08-26 06:00:00', 'PM008', 0, 0, NULL);



-- 데이터 삽입 완료 확인

SELECT 'Smart Factory sample data inserted successfully!' as completion_message;